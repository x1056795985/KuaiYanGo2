//下次重构记录要点
# 系统设计4层架构
## 控制器,
入口 rbac 权限控制 模拟请求数据,  逻辑层结果数据,添加到ApiJson格式返回  
## 逻辑层
所有逻辑,无需事务的,调用数据层,需要事务的, 调用事务层,  返回给控制器 数据
## 事务层  
'控制是否使用事务,创建db对象,查询是否加锁传给数据层   控制事务提交返回,
## 数据层  
'有事务层的对象,就用,没有就直接用全局,


# 待解决
余额扣除成功, 业务失败,余额恢复, 如果恢复失败了,怎么处理

